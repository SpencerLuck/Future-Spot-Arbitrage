# Future-Spot-Arbitrage

This is a unique arbitrage strategy developed to exploit mispricings between Crypto Currency perpetual futures and spot markets. This strategy was specifically developed on the FTX exchange, but should theoretically be applicable on other exchanges that offer both perpetual future and spot instruments.

### What is Arbitrage?
Arbitrage is the practice of exploiting an assets price differences in different markets. A simple example would be if product X was listed in Market A and Market B. This means we can buy and sell product X in both Market A and Market B. Additionally, product X is transferable meaning that we can buy it in Market A and sell it in Market B or vice versa. If product X selling for $1 in Market A and Market B was offering to purchase product X for $1.20. We would buy product X in the cheaper market, Market A and sell it in Market B. Our profit would be the difference between what we bought it for and what we sold it for, thus netting $0.20 per transaction (excluding other costs). This profit is theoretically risk free. This was a very simple example with the majority of arbitrage strategies being far more complex and containing some form of risk.

### Arbitrage between Spot and Future Markets
The word arbitrage is used loosely in this context as this strategy is far from what would be considered traditional abritrage however, considering that it is exploiting mispricings between two markets it is still arbitrage in a modern sense. The strategy operates on the same exchange and on the same cryptocurrency, but between two markets, spot markets and perpetual future markets. Spot markets allow the purchase and sale of the actual currency (eg: BTC) and directly track the market value of a coin. The limitation of such markets for retail traders is that they don't allow a trader to short sell the asset easily. Perpetual futures markets on the other hand are markets for a perpetual futures contract which is technically an agreement to buy or sell an asset at an unspecified point in the future. Practically they allow traders to take both long and short positions easily, with the caveat of a funding payment made between long and short position holders at certain time intervals.

The theory underpinning this strategy is that the spot price and perpetual future price for a particular cryptocurrency should be very similar or the same as they are trading on the same asset. Additionally perpetual futures have a funding rate which is the hourly payment between long and short position holders. If the perpetual futures contracts are trading at a premium to the index price of the actual coin then long positions pay short positions. When contracts are trading at a discount then short positions pay long positions. This acts as a measure to maintain perpetual futures prices within a reasonable range of the index price and by extension the spot price. My hypothesis is that during certain market movements the perpetual futures price may become detached from the spot price momentarily. Perpetual futures volumes are grenerally much higher than spot volumes, suggesting that more traders are trading futures based on their expectations than are trading spot. This means that during a strong bullish market for example, traders optimism and upward momentum is more strongly exhibited in perpetual futures market. This may cause the perpertual future price to be bidded up above the spot price momentarily. This is a short-term detachment which likely exists between funding payments. To take advantage of this opportunity in line with this current strategy we would take a short position on perpetual futures and buy the spot. When sufficient convergence has occured we exit both positions. This strategy has two sources of profit, the future-spot price convergence differential or our targeted convergence differential as well as the likely funding rate received for every hour that the short position on perpetual futures is kept open. Obviously we do face transaction costs, so our entry threshold is the sum of transaction costs faced when performing all transactions. Additionally, we will also need some entry rule based on historical future-spot spreads, this is subject to individual traders opinions but logical rules may be based on the mean, standard deviation or quartiles of spreads. Entry rules should be matched by exit rules to characterize when sufficient future-spot price convergence has occurred.

### Strategy challenges
On paper this strategy seems well founded and when looking at historical spreads based on OHLCV data the strategy seems even more attractive. However, in addition to the hidden risks of slippage and execution time faced by other arbitrage strategies, this strategy has one glaring weakness. Using OHLCV historical data does not give a picture of the bid-ask spread or state of the orderbook at those moments in time. It is impossible to know which opportunities were legitimate future-spot divergence moments and which were just large differences in one or both markets' bid-ask prices. This is especially prevalent in lower volume cryptocurrencies where large bid-ask spreads are not uncommon due to a lack of liquidity and volume traded. Because this live arbitrage bot looks for spreads between the perpetual future bids and spot asks as well as the exit spread between the perpetual futures ask and the spot bid to confirm a true future-spot divergence, opportunities appear far less frequently. My extended hypothesis is that a continuing bear market would make this worse as the strategy described above is one-sided. By one-sided I mean that we can only trade a spread when the futures price is above the spot price owing to the inability to short the spot. This means that any downward detachment where the futures price falls below the spot price during volatile downtrends is not truly tradeable. 

The intention of this strategy is not to make a huge amount of arbitrage profit, that is highly unlikely, but instead to provide a different take on cryptocurrency arbitrage that I havenâ€™t seen discussed before. And the live arbitrage trading bot is a small coding exercise in itself.

The FutureSpotArbitrageExploration notebook details the simple process of testing the arbitrage theory and examining if theoretical opportunities exist, limited by the use of OHLCV 1 minute data. The AbritrageTradingBot is a simple live trading bot that uses an Future-Spot mean and third quartile based arbitrage strategy. The Abitrage Utils file contains dictionaries of target cryptocurrencies and historical mean and quartile values used in live trading. These historical values would likely need updating at regular intervals and the length of historical data used is another hyperparameter open to tuning.
